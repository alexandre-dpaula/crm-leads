(()=>{var e={};e.id=178,e.ids=[178],e.modules={3524:e=>{"use strict";e.exports=require("@prisma/client")},7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2781:e=>{"use strict";e.exports=require("stream")},3837:e=>{"use strict";e.exports=require("util")},4546:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),a(8235),a(5221),a(5062),a(5866);var r=a(3191),t=a(8716),l=a(7922),i=a.n(l),o=a(5231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);a.d(s,n);let d=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8235)),"/Users/alexandredpaula/SaaS DEV/CRM Leads V2/app/profile/page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,5221)),"/Users/alexandredpaula/SaaS DEV/CRM Leads V2/app/profile/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,5062)),"/Users/alexandredpaula/SaaS DEV/CRM Leads V2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/alexandredpaula/SaaS DEV/CRM Leads V2/app/profile/page.tsx"],m="/profile/page",x={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2890:(e,s,a)=>{Promise.resolve().then(a.bind(a,214))},214:(e,s,a)=>{"use strict";a.d(s,{default:()=>p});var r=a(326),t=a(7577),l=a(4723),i=a(4064),o=a(381),n=a(341),d=a(4432),c=a(772),m=a(5677);let x=n.jE;function p({user:e}){let[s,a]=(0,t.useState)(e.avatarUrl),[n,p]=(0,t.useState)(),[u,f]=(0,t.useState)(!1),{register:h,handleSubmit:g,setValue:j,formState:{errors:w}}=(0,l.cI)({resolver:(0,i.F)(x),defaultValues:{name:e.name,email:e.email}}),v=async e=>{f(!0);try{let s=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,avatarData:n})});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.message??"Erro ao atualizar perfil")}o.ZP.success("Perfil atualizado com sucesso!")}catch(e){o.ZP.error(e instanceof Error?e.message:"N\xe3o foi poss\xedvel atualizar suas informa\xe7\xf5es.")}finally{f(!1),j("currentPassword",""),j("newPassword",""),j("confirmPassword","")}},P=async e=>{let s=e.target.files?.[0];if(!s)return;if(!s.type.startsWith("image/")){o.ZP.error("Selecione uma imagem v\xe1lida.");return}if(s.size>2097152){o.ZP.error("A imagem deve ter no m\xe1ximo 2MB.");return}let r=await new Promise((e,a)=>{let r=new FileReader;r.onload=()=>e(r.result),r.onerror=a,r.readAsDataURL(s)});a(r),p(r)};return(0,r.jsxs)("div",{className:"flex flex-1 flex-col overflow-y-auto bg-slate-50",children:[(0,r.jsxs)("header",{className:"border-b border-slate-200 bg-white px-10 py-6",children:[r.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Perfil"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Atualize suas informa\xe7\xf5es pessoais e prefer\xeancias de conta."})]}),r.jsx("div",{className:"mx-auto w-full max-w-3xl px-6 py-10",children:(0,r.jsxs)("form",{className:"flex flex-col gap-8",onSubmit:g(v),children:[(0,r.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-8 shadow-sm",children:[r.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Informa\xe7\xf5es principais"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Nome, e-mail e avatar usados no sistema."}),(0,r.jsxs)("div",{className:"mt-6 flex flex-col gap-6 md:flex-row md:items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[r.jsx("div",{className:"h-24 w-24 overflow-hidden rounded-full border border-slate-200",children:s?r.jsx("img",{src:s,alt:e.name,className:"h-full w-full object-cover"}):r.jsx("div",{className:"flex h-full w-full items-center justify-center bg-slate-100 text-slate-400",children:e.name.split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2 text-xs text-slate-400",children:[(0,r.jsxs)("label",{className:"cursor-pointer rounded-xl border border-slate-200 px-3 py-1.5 font-medium text-slate-600 hover:bg-slate-100",children:["Alterar avatar",r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:P})]}),r.jsx("span",{children:"PNG ou JPG at\xe9 2MB"})]})]}),(0,r.jsxs)("div",{className:"grid flex-1 grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:"name",children:"Nome completo"}),r.jsx(d.I,{id:"name",placeholder:"Seu nome",...h("name")}),w.name?r.jsx("p",{className:"text-xs text-rose-500",children:w.name.message}):null]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:"email",children:"E-mail"}),r.jsx(d.I,{id:"email",type:"email",placeholder:"seuemail@empresa.com",...h("email")}),w.email?r.jsx("p",{className:"text-xs text-rose-500",children:w.email.message}):null]})]})]})]}),(0,r.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-8 shadow-sm",children:[r.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Seguran\xe7a"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Troque sua senha para manter a conta protegida."}),(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-1 gap-5 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:"currentPassword",children:"Senha atual"}),r.jsx(d.I,{id:"currentPassword",type:"password",placeholder:"••••••",...h("currentPassword")}),w.currentPassword?r.jsx("p",{className:"text-xs text-rose-500",children:w.currentPassword.message}):null]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:"newPassword",children:"Nova senha"}),r.jsx(d.I,{id:"newPassword",type:"password",placeholder:"••••••",...h("newPassword")}),w.newPassword?r.jsx("p",{className:"text-xs text-rose-500",children:w.newPassword.message}):null]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:"confirmPassword",children:"Confirmar nova senha"}),r.jsx(d.I,{id:"confirmPassword",type:"password",placeholder:"••••••",...h("confirmPassword")}),w.confirmPassword?r.jsx("p",{className:"text-xs text-rose-500",children:w.confirmPassword.message}):null]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[r.jsx(c.z,{type:"button",variant:"ghost",className:"border border-slate-200 bg-white text-slate-600",onClick:()=>{a(e.avatarUrl),p(void 0),j("name",e.name),j("email",e.email),j("currentPassword",""),j("newPassword",""),j("confirmPassword","")},children:"Reverter altera\xe7\xf5es"}),r.jsx(c.z,{type:"submit",disabled:u,className:"min-w-[160px]",children:u?r.jsx(m.$,{size:18}):"Salvar altera\xe7\xf5es"})]})]})})]})}},5221:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var r=a(9510),t=a(8585),l=a(9381),i=a(5852);async function o({children:e}){let s=await (0,i.ts)();return s||(0,t.redirect)("/login"),(0,r.jsxs)("div",{className:"grid min-h-screen grid-cols-[16rem_1fr] bg-slate-100",children:[r.jsx(l.ZP,{user:{id:s.id,name:s.name,email:s.email,avatarUrl:s.avatarUrl}}),r.jsx("div",{className:"flex flex-col overflow-x-hidden",children:e})]})}},8235:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var r=a(9510),t=a(5852),l=a(8570);let i=(0,l.createProxy)(String.raw`/Users/alexandredpaula/SaaS DEV/CRM Leads V2/components/forms/profile-client.tsx`),{__esModule:o,$$typeof:n}=i;i.default;let d=(0,l.createProxy)(String.raw`/Users/alexandredpaula/SaaS DEV/CRM Leads V2/components/forms/profile-client.tsx#default`);async function c(){let e=await (0,t.ts)();return e?r.jsx(d,{user:{id:e.id,name:e.name,email:e.email,avatarUrl:e.avatarUrl??void 0}}):null}}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[948,954,744,268,418],()=>a(4546));module.exports=r})();